#!/usr/bin/env node

var fs = require('fs')
  , Template = require('../lib/template')
  , root = __dirname + '/..'
  , layout = new Template(root + '/doc/layouts/default.mustache');


layout.render(null, {
  top: root + '/doc/_masthead.mustache',
  main: root + '/doc/index.mustache'
}, function(err, output) {
  if (err) throw err;
  fs.writeFile(root + '/index.html', output);
});

layout.render({
  title: 'Getting started',
  description: 'This is an example to show the sidebar layout',
  gettingStarted: true
}, {
  main: root + '/doc/layouts/sidebar.mustache',
  menu: root + '/out/getting-started-menu.mustache',
  content: root + '/out/getting-started.mustache'
}, function(err, output) {
  if (err) throw err;
  fs.writeFile(root + '/getting-started.html', output);
});

layout.render({
  title: 'API Reference',
  api: true
}, {
  main: root + '/doc/layouts/sidebar.mustache',
  menu: root + '/out/api-menu.mustache',
  content: root + '/out/api.mustache'
}, function(err, output) {
  if (err) throw err;
  fs.writeFile(root + '/api.html', output);
});

